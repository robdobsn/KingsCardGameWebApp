// Generated by CoffeeScript 1.6.3
var PlayingCards;

PlayingCards = (function() {
  PlayingCards.prototype.cardsInDeck = 52;

  PlayingCards.prototype.cardsInSuit = 13;

  PlayingCards.prototype.suitNames = ['club', 'diamond', 'heart', 'spade'];

  PlayingCards.prototype.rankNames = ['Ace', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'Jack', 'Queen', 'King'];

  PlayingCards.prototype.dealNextIdx = 0;

  PlayingCards.prototype.AceId = 0;

  PlayingCards.prototype.TwoId = 1;

  PlayingCards.prototype.KingId = 12;

  PlayingCards.prototype.deck = [];

  function PlayingCards() {
    this.deck = this.createUnsorted();
    this.shuffle();
  }

  PlayingCards.prototype.createUnsorted = function() {
    var deck, _i, _ref, _results;
    deck = (function() {
      _results = [];
      for (var _i = 0, _ref = this.cardsInDeck - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }
      return _results;
    }).apply(this);
    return deck;
  };

  PlayingCards.prototype.getCardInfo = function(cardId) {
    var cardInfo, rankIdx, suitIdx, suitName;
    suitIdx = Math.floor(cardId / this.cardsInSuit);
    suitName = this.suitNames[suitIdx];
    rankIdx = cardId % this.cardsInSuit;
    cardInfo = {
      suitIdx: suitIdx,
      suitName: suitName,
      rankIdx: rankIdx,
      rankName: this.rankNames[rankIdx],
      cardFileNamePng: "card_" + (rankIdx + 1) + "_" + suitName + ".png"
    };
    return cardInfo;
  };

  PlayingCards.prototype.getCardFileName = function(cardId) {
    if (cardId < 0) {
      return "card_empty.png";
    }
    return this.getCardInfo(cardId).cardFileNamePng;
  };

  PlayingCards.prototype.shuffle = function() {
    var i, j, _i, _ref, _ref1;
    for (i = _i = _ref = this.deck.length - 1; _ref <= 1 ? _i <= 1 : _i >= 1; i = _ref <= 1 ? ++_i : --_i) {
      j = Math.floor(Math.random() * (i + 1));
      _ref1 = [this.deck[j], this.deck[i]], this.deck[i] = _ref1[0], this.deck[j] = _ref1[1];
    }
    return true;
  };

  PlayingCards.prototype.startDeal = function() {
    return this.dealNextIdx = 0;
  };

  PlayingCards.prototype.getNextCard = function() {
    var card;
    card = this.deck[this.dealNextIdx];
    this.dealNextIdx += 1;
    this.dealNextIdx = this.dealNextIdx % this.cardsInDeck;
    return card;
  };

  PlayingCards.prototype.findNextCardInSameSuit = function(cardId) {
    var cardInfo;
    cardInfo = this.getCardInfo(cardId);
    if (cardInfo.rankIdx === this.KingId) {
      return -1;
    }
    return cardId + 1;
  };

  PlayingCards.prototype.empty = function() {
    return this.deck = [];
  };

  PlayingCards.prototype.addCard = function(cardId) {
    return this.deck.push(cardId);
  };

  return PlayingCards;

})();
